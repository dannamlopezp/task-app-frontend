<div class="task-page-header">
  <h1>Mis Tareas Diarias</h1>
  <a routerLink="/tasks/new" class="btn-create">
    ➕ Crear Nueva Tarea
  </a>
</div>

<div class="filter-controls">
  <input 
    type="search" 
    placeholder="Buscar por título o descripción..." 
    [(ngModel)]="searchTerm" 
    (ngModelChange)="triggerFilterChange()"
    class="search-input"
  >

  <select [(ngModel)]="filterStatus" (ngModelChange)="triggerFilterChange()">
    <option value="">Todos los Estados</option>
    <option value="pendiente">Pendiente</option>
    <option value="en_progreso">En Progreso</option>
    <option value="completada">Completada</option>
  </select>

  <select [(ngModel)]="filterPriority" (ngModelChange)="triggerFilterChange()">
    <option value="">Todas las Prioridades</option>
    <option value="alta">Alta</option>
    <option value="media">Media</option>
    <option value="baja">Baja</option>
  </select>
</div>

<div class="task-board">
  
  <div class="task-column pending">
    <h3>Pendiente ({{ getTasksByStatus('pendiente').length }})</h3>
    <div *ngIf="getTasksByStatus('pendiente').length === 0" class="empty-state">
      ¡No hay tareas pendientes!
    </div>
    <app-task-item
      *ngFor="let task of getTasksByStatus('pendiente')"
      [task]="task"
      (taskUpdated)="onTaskUpdated()"
    />
  </div>

  <div class="task-column in-progress">
    <h3>En Progreso ({{ getTasksByStatus('en_progreso').length }})</h3>
    <div *ngIf="getTasksByStatus('en_progreso').length === 0" class="empty-state">
      Nada en progreso por ahora.
    </div>
    <app-task-item
      *ngFor="let task of getTasksByStatus('en_progreso')"
      [task]="task"
      (taskUpdated)="onTaskUpdated()"
    />
  </div>
  
  <div class="task-column completed">
    <h3>Completada ({{ getTasksByStatus('completada').length }})</h3>
    <div *ngIf="getTasksByStatus('completada').length === 0" class="empty-state">
      ¡Es hora de completar tareas!
    </div>
    <app-task-item
      *ngFor="let task of getTasksByStatus('completada')"
      [task]="task"
      (taskUpdated)="onTaskUpdated()"
    />
  </div>
</div>